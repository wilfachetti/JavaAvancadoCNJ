###
# CONFIG
@host=http://localhost:8081
@user=usuario
@password=123456
###

### SIMPLE AUTH WITH SPRING SECURITY
# GET ALL
GET {{host}}/api/casos
Authorization: Basic {{user}} {{password}}

# GET FOR ID
GET {{host}}/api/casos/3
Authorization: Basic {{user}} {{password}}

# CREATE NEW
POST {{host}}/api/casos
Authorization: Basic {{user}} {{password}}
Content-Type: application/json

{
    "descricao":"Caso 06"
}

# DELETE CASE
DELETE {{host}}/api/casos/6
Authorization: Basic {{user}} {{password}}


###
# AUTH WITH KEYCLOAK
@keycloak=http://localhost:8080
@realm-token=realms/realm-cnj/protocol/openid-connect/token
@client-id=keycloak-cnj
###

# TEST
GET {{keycloak}}

# GET TOKEN FOR AUTHENTICATION
POST {{keycloak}}/{{realm-token}}
Content-Type: application/x-www-form-urlencoded
grant_type=password&client_id={{client-id}}&username={{user}}&password={{password}}

# REFRESH TOKEN
POST {{keycloak}}/{{realm-token}}
Content-Type: application/x-www-form-urlencoded
client_id={{client-id}}&refresh_token={{refresh-token}}&grant_type=refresh_token

###
@token=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJyQ0p1TGxoQXh5VWV6SjJEemNhWkZOT2tiSVYwQXNjZXZHaThkanlCcklFIn0.eyJleHAiOjE3MTUzNTY2MjAsImlhdCI6MTcxNTM1NjMyMCwianRpIjoiYTRlMTJlZWYtZDkyMy00NDc0LWExZmEtZDExN2EyNDhhMmM2IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9yZWFsbS1jbmoiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiZWU0NjNlOWUtMmZlMy00M2QwLWFlMDUtMjU0OGI4MDU2ZjkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoia2V5Y2xvYWstY25qIiwic2Vzc2lvbl9zdGF0ZSI6ImM3OGY2N2JiLTYzNTktNGI2OC04ZjIyLTc2MzliZTVjMDZlNyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2xvY2FsaG9zdDo4MDgxIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsImRlZmF1bHQtcm9sZXMtcmVhbG0tY25qIiwidW1hX2F1dGhvcml6YXRpb24iLCJ1c2VyIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJtaWNyb3Byb2ZpbGUtand0IHByb2ZpbGUgZW1haWwiLCJzaWQiOiJjNzhmNjdiYi02MzU5LTRiNjgtOGYyMi03NjM5YmU1YzA2ZTciLCJ1cG4iOiJ1c3VhcmlvIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJVc3VhcmlvIFNhbGRhbmhhIiwiZ3JvdXBzIjpbIm9mZmxpbmVfYWNjZXNzIiwiZGVmYXVsdC1yb2xlcy1yZWFsbS1jbmoiLCJ1bWFfYXV0aG9yaXphdGlvbiIsInVzZXIiXSwicHJlZmVycmVkX3VzZXJuYW1lIjoidXN1YXJpbyIsImdpdmVuX25hbWUiOiJVc3VhcmlvIiwiZmFtaWx5X25hbWUiOiJTYWxkYW5oYSIsImVtYWlsIjoidXN1YXJpb0BnbWFpbC5jb20ifQ.CLClxsHhiUPlVLbppISN4CNhzozTXq8oOfl0N--_2nZLLODeoHAPN8lH8a-MN8g9ULuit62Py09HDSPTAAN6qh8XmpPrgqm3sYMjtdQ4UF-MOVLdiALdZH2pgE0xmBakXipOz-9dJCP7IqUOdsgx0PFpbzHlbXQ1JysUL21BpJaUXLpPwgaWbW9gNvS3eXRU1dHv8soeAgAv8Zt-4i4EmzefmzGLKW9euA2cmPtxdJiTk8jIw_Vq_sjNrQX2_UCGT4zzTuBHqz_zEXC8I_kxBEcaRfNW0ITMM5pECgO6_neYi6GlzTT-1Q9LwKfd6K_RwQCoojHY24NpbaJHPciB4w
@refresh-token=token-refresh
###

#
# APPLICATION WITH KEYCLOAK
#

# GET ALL
GET {{host}}/api/casos
Authorization: Bearer {{token}}

# INSERT NEW
POST {{host}}/api/casos
Authorization: Bearer {{token}}
Content-Type: application/json
{
    "decisao":"A",
    "descricao":"Caso A"
}

# DELETE
DELETE {{host}}/api/casos/552
Authorization: Bearer {{token}}

# UPDATE OR ALTER
PUT {{host}}/api/casos/603
Authorization: Bearer {{token}}
Content-Type: application/json
{
    "descricao":"Caso 603"
}

# GET SPECIFIC
GET {{host}}/api/casos/603
Authorization: Bearer {{token}}

# SENDING FILE
POST {{host}}/api/arquivos/upload/
Authorization: Bearer {{token}}
Accept: application/json
Content-Type: multipart/form-data; boundary=EnvioArquivo

--EnvioArquivo
Content-Disposition: form-data; name="file"; filename="DocTest.pdf"
Content-Type: application/octet-stream

< DocTest.pdf
--EnvioArquivo


# SENDING MESSAGE RABBITMQ
POST {{host}}/api/queue/sender
Authorization: Bearer {{token}}
Content-Type: application/raw
"Mensagem transmitida pelo httpyac"

POST {{host}}/api/queue/sender
Authorization: Bearer {{token}}
Content-Type: application/json
{
    "decisao": "C",
    "descricao":"New Caso RabbitMQ"
}